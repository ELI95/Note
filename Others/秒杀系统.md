#### 秒杀系统

- 客户端
  - 页面静态化，使用CDN
  - 秒杀链接加密
  - 秒杀按钮控制
  - 加验证码
  - 请求拦截

- 代理层
  - 缓存
    - 可以将一些变化不频繁的数据，提到代理层来缓存，提高响应的效率，比如用户信息
  - 恶意请求拦截
  - 限流
  - 负载均衡
  - 风控
    - 过滤虚假用户账号

- 应用层
  - 防止超卖
    - 使用redis的lua脚本实现原子性库存操作
  - 订单处理
    - 利用消息队列实现订单异步处理
    - 利用延时队列实现超时未付款订单自动取消
        - 可以使用redis的zset

- 设计原则
    - 服务单一职责
    - 业务隔离，服务隔离，数据库隔离
    - 将请求尽量拦截在系统上游
    - 利用消息队列削峰填谷，减小突发流量对下游的冲击

- 注意事项
    - 系统上线之前需要进行压力测试
    - 如果业务涉及到多个服务和数据库的交互，需要使用适当的分布式事务保证数据一致性
    - 即使使用了以上方法，还是有秒杀服务被打崩的风险，所以需要准备及时止损和快速恢复的方案
