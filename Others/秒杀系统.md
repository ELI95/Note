#### 秒杀系统

- 服务单一职责，独立部署
    - 隔离秒杀相关的服务和数据库

- 前端相关
    - 页面静态化，使用CDN
    - 秒杀链接加密
    - 秒杀按钮控制
    - 加验证码
    - 请求拦截

- Nginx
    - 恶意请求拦截
    - 限流
    - 负载均衡

- 风控
    - 过滤虚假用户账号

- 库存预热，快速扣减，防止超卖，异步下单
    - 使用 redis 的lua脚本实现原子性库存操作
    - 成功扣减库存后，利用消息队列实现异步下单
    - 利用延时队列实现超时付款订单自动取消
        - 可以使用redis的zset

- 设计原则
    - 服务单一职责，隔离秒杀相关的服务和数据库
    - 将请求尽量拦截在系统上游
    - 利用消息队列削峰填谷，减小突发流量对于下游的冲击

- 注意事项
    - 如果业务涉及到多个服务和数据库的交互，需要使用适当的分布式事务保证数据一致性
    - 使用以上手段还是有秒杀服务被打挂的风险，所以需要做好熔断和隔离，避免影响其他系统
